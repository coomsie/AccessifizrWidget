define("dojo/_base/declare dojo/_base/lang dojo/topic dojo/dom dojo/query dojo/dom-attr dojo/dom-construct dojo/json dojo/on dojo/keys dojo/_base/array dojo/dom-class dojo/Deferred dijit/focus dojo/i18n!./nls/strings dojo/domReady!".split(" "),function(J,f,K,L,g,d,t,D,h,M,m,p,u,v,w){function x(a,b){var c=new u,e=setInterval(dojo.hitch(this,function(){if(0<g(a.id).length&&!b||0<g(a.id).length&&"none"!=g(a.id)[0].style.display&&b)c.resolve(a),clearInterval(e)},100));return c.promise}function y(a,b){return f.exists(b,
a)?a[b].replace(/\[.*\]/g,""):null}function z(a,b,c){var e=!1;f.exists(c,b)?b[c].split(",").forEach(function(c){/\[/g.test(c)?a.type==c.replace(/\[.*\]/g,"")&&0<=m.indexOf(c.match(/\[(.*?)\]/)[1].split("|"),a.keyCode)&&(e=!0):c==a.type&&(e=!0)}):e=!1;return e}function s(a){f.exists("preserveTabs",a)?a.preserveTabs||A():A();f.exists("escModes",a)&&m.forEach(a.objects,function(b){b.escModes=a.escModes;b.onEsc=a.onEsc});m.forEach(a.objects,function(a){x(a,!1).then(dojo.hitch(this,function(c){g(c.id).forEach(function(a){w[c.id]&&
d.set(a,"alt",w[c.id]);f.exists("gridConfig",c)?"dgrid"==c.gridConfig.type&&g("[tabindex=0]",g(c.id)[0]).forEach(function(a){q(a,c.tab)}):q(a,c.tab);if(f.exists("onClick",c)){var b=[];f.exists("objects",c.onClick)&&b.push(function(){s(c.onClick)});f.exists("back",c.onClick)&&b.push(function(){var a=B(parseData,"id",c.id)[0],b=c.onClick.back;for(i=0;i<=b;i++)a=a.parent;s(a)});handlerBus.push(h(a,y(c,"clickModes"),f.hitch(this,function(a){if(z(a,c,"clickModes")){var e=f.exists("clickControl",c)?g(c.clickControl)[0]:
v.curNode,d=f.exists("clickControlEvt",c)?c.clickControlEvt:"click";a.type!==d?h.emit(e,d,{bubbles:!0}):(b.forEach(function(a){a()}),f.exists("onClick.focus",c)&&x(c.onClick.focus,!0).then(dojo.hitch(this,function(a){g(a.id)[0].focus()})))}})))}f.exists("onEsc",c)&&handlerBus.push(h(a,y(c,"escModes"),function(a){if(z(a,c,"escModes")){var b=c.onEsc.escControl,b="self"==b?v.curNode:g(b)[0];a.type!==c.onEsc.escControlEvt&&h.emit(b,c.onEsc.escControlEvt,{bubbles:!0})}}))})}))})}function k(a){return"IMG"==
a.nodeName&&!p.contains(a,"layerTile")&&!p.contains(a,"canBeHidden")&&!p.contains(a,"alwaysHidden")}function A(){for(i=0;10>=i;i++)g('[tabIndex="'+i+'"]',document.body).forEach(function(a){q(a,-1)});m.forEach(handlerBus,function(a){a.remove()})}function r(a){for(;a.parentNode;)return a=a.parentNode;return null}function B(a,b,c){var e=[],d;for(d in a)a.hasOwnProperty(d)&&"parent"!=d&&("object"==typeof a[d]?e=e.concat(B(a[d],b,c)):d==b&&a[d]==c||d==b&&""==c?e.push(a):a[d]==c&&""==b&&-1==e.lastIndexOf(a)&&
e.push(a));return e}function E(a,b){return{div:function(a){var b=F("div",a);b.style.background="transparent url("+a.src+") no-repeat";b.attributes.originalDiv=a.outerHTML;var f=new Image;f.src=a.src;if(f.width>a.width||f.height>a.height)b.style.backgroundSize=a.width+"px "+a.height+"px",b.style["-webkit-background-size"]=a.width+"px "+a.height+"px";b.style.display="inline-block";a.style.display="none";a.style.visibility="hidden";d.set(a,"aria-hidden","true");h(b,"click",function(b){h.emit(a,"click",
{})});h(b,"keydown",function(b){h.emit(a,"keydown",{})});""==a.id&&(a.id=G());b.id=a.id+"_dis";0==g("#"+a.id+"_dis").length&&t.place(b,a,"after")},img:function(a){a.style.display="inline-block";a.style.visibility="";d.set(a,"aria-hidden","false");""!=a.id&&0<g("#"+a.id+"_dis").length&&t.destroy(g("#"+a.id+"_dis")[0])}}[a](b)}function H(a){var b=new u;setTimeout(function(){""!=a.src&&b.resolve(a)},100);return b.promise}function G(){for(var a="",b=0;10>b;b++)a+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*
Math.random()));return a}function F(a,b){var c=document.createElement(a),e,d,f=b.attributes,g=f.length;for(b=b.cloneNode(!0);b.firstChild;)c.appendChild(b.firstChild);for(e in b)try{d=b[e],!d||"outerHTML"===e||"string"!==typeof d&&"number"!==typeof d||(c[e]=b[e])}catch(h){}for(e=0;e<g;e++)c.setAttribute(f[e].nodeName,f[e].value);c.style.cssText=b.style.cssText;return c}function C(a,b){a.parent=b;if("undefined"!==typeof a)for(n in a.objects)a.objects[n].parent=a,a.objects[n].onClick&&C(a.objects[n].onClick,
a)}function q(a,b){d.set(a,"tabIndex",b);options.applyAria&&I(a)}function l(a,b){H(b).then(function(b){E(a,b)})}function I(a){if(-1==m.indexOf(options.exemptTags,a.nodeName)){if(0==d.get(a,"tabindex")||0<d.get(a,"tabindex")){d.set(a,"aria-hidden","false");k(a)&&l("img",a);for(var b=a;null!==r(b);)d.set(b,"aria-hidden","false"),b=r(b);dojo.query("*",a).forEach(function(a){p.contains(a,"alwaysHidden")||d.set(a,"aria-hidden","false");k(a)&&l("img",a)})}-1==d.get(a,"tabindex")&&(d.set(a,"aria-hidden",
"true"),k(a)&&l("div",a),dojo.query("*",a).forEach(function(b){if(0==d.get(b,"tabindex")||0<d.get(b,"tabindex")){d.set(a,"aria-hidden","false");k(a)&&l("img",a);d.set(b,"aria-hidden","false");k(b)&&l("img",b);for(var e=a;null!==r(e);)d.set(e,"aria-hidden","false"),k(e)&&l("img",e),e=r(e)}k(b)&&l("div",b)}))}}return{init:function(a){options={exemptTags:["B","BR"],exemptClasses:["layerTile"],applyAria:!1};f.mixin(options,a);handlerBus=[];parseData=D.parse(options.data);C(parseData.tabOrder,null);g("*",
document.body).forEach(function(a){q(a,-1)});s(parseData.tabOrder)}}});